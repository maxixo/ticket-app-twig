{% extends "layout.twig" %}
{% block title %}Edit Ticket{% endblock %}

{% block content %}
<div style="min-height:100vh;background-color:#f9fafb;">
  <div style="max-width:700px;margin:2rem auto;background:white;padding:2rem;border-radius:1rem;box-shadow:0 4px 8px rgba(0,0,0,0.1);">
    <h2 style="font-size:1.5rem;font-weight:700;color:#1f2937;margin-bottom:1.5rem;">Edit Ticket</h2>

    {% if error %}
      <div style="color:#dc2626;margin-bottom:1rem;font-weight:600;">{{ error }}</div>
    {% endif %}

    <form method="POST" action="/tickets/update" style="display:flex;flex-direction:column;gap:1rem;">
      <input type="hidden" name="id" value="{{ ticket.id }}"/>

      <!-- Title -->
      <div>
        <label style="font-weight:600;color:#374151;">Title:</label>
        <input type="text" name="title" value="{{ ticket.title }}" required minlength="3"
               style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:0.5rem;"/>
      </div>

      <!-- Description -->
      <div>
        <label style="font-weight:600;color:#374151;">Description:</label>
        <textarea name="description" required minlength="3" rows="4"
                  style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:0.5rem;">{{ ticket.description }}</textarea>
      </div>

      <!-- Status -->
      <div>
        <label style="font-weight:600;color:#374151;">Status:</label>
        <select name="status" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:0.5rem;">
          <option value="open" {% if ticket.status == 'open' %}selected{% endif %}>Open</option>
          <option value="in_progress" {% if ticket.status == 'in_progress' %}selected{% endif %}>In Progress</option>
          <option value="closed" {% if ticket.status == 'closed' %}selected{% endif %}>Closed</option>
        </select>
      </div>

      <!-- Priority -->
      <div>
        <label style="font-weight:600;color:#374151;">Priority:</label>
        <select name="priority" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:0.5rem;">
          <option value="low" {% if ticket.priority == 'low' %}selected{% endif %}>Low</option>
          <option value="medium" {% if ticket.priority == 'medium' %}selected{% endif %}>Medium</option>
          <option value="high" {% if ticket.priority == 'high' %}selected{% endif %}>High</option>
        </select>
      </div>

      <!-- Buttons -->
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem;">
        <a href="/ticket_list"
           style="background-color:#9ca3af;color:white;padding:0.75rem 1.5rem;border-radius:0.5rem;font-weight:600;text-decoration:none;text-align:center;"
           onmouseover="this.style.backgroundColor='#6b7280';"
           onmouseout="this.style.backgroundColor='#9ca3af';">
           Cancel
        </a>

        <button type="submit"
          style="background-color:#2563eb;color:white;padding:0.75rem 1.5rem;border:none;border-radius:0.5rem;font-weight:600;cursor:pointer;"
          onmouseover="this.style.backgroundColor='#1d4ed8';"
          onmouseout="this.style.backgroundColor='#2563eb';">
          Save Changes
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
